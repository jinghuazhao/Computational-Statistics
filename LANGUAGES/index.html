<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Language notes - Computational Statistics</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/Bash.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/HTML.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/Java.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/JavaScript.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/Perl.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/Python.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/R.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-dark">
            <div class="container">
                <a class="navbar-brand" href="..">Computational Statistics</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href=".." class="nav-link"></a>
                            </li>
                            <li class="navitem">
                                <a href="../AI/" class="nav-link">AI</a>
                            </li>
                            <li class="navitem">
                                <a href="../Computing/" class="nav-link">Computing</a>
                            </li>
                            <li class="navitem">
                                <a href="../download/" class="nav-link">Download</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Internet <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../Flask/" class="dropdown-item">Flask</a>
</li>
                                    
<li>
    <a href="../mythic-beasts/" class="dropdown-item">mythic-beasts</a>
</li>
                                    
<li>
    <a href="../plumber/" class="dropdown-item">plumber</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Setup <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../INSTALL/" class="dropdown-item">Installation notes</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active">Language notes</a>
</li>
                                    
<li>
    <a href="../PARALLEL/" class="dropdown-item">Parallel computing</a>
</li>
                                    
<li>
    <a href="../REPRODUCE/" class="dropdown-item">Reproducible research</a>
</li>
                                    
<li>
    <a href="../SYSTEMS/" class="dropdown-item">System-related materials</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../INSTALL/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../PARALLEL/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="https://github.com/jinghuazhao/Computational-Statistics" class="nav-link"><i class="fa fa-github"></i> GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#language-notes" class="nav-link">Language notes</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#ada" class="nav-link">Ada</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#basic" class="nav-link">BASIC</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#c" class="nav-link">C</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#c_1" class="nav-link">C++</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#fortran" class="nav-link">Fortran</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#java" class="nav-link">Java</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#javascript" class="nav-link">JavaScript</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#perl" class="nav-link">Perl</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#python" class="nav-link">Python</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#r" class="nav-link">R</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#shinyapps" class="nav-link">shinyapps</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#texlatex" class="nav-link">TeX/LaTeX</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#typescript" class="nav-link">typescript</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#visual-studio-code" class="nav-link">Visual Studio Code</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#chatgpt" class="nav-link">ChatGPT</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#codegpt" class="nav-link">CodeGPT</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="language-notes">Language notes</h1>
<p>This page collects information on Visual Studio Code, C, C++, Fortran, Java, Perl, python and R.</p>
<h2 id="ada">Ada</h2>
<p>Web: <a href="https://www.adaic.org/">https://www.adaic.org/</a></p>
<p>From <code>hello.adb</code>,</p>
<pre><code class="language-ada">with Ada.Text_IO;

procedure Hello is
begin
   Ada.Text_IO.Put_Line (&quot;Hello, World!&quot;);
end Hello;
</code></pre>
<p>We run</p>
<pre><code class="language-bash">gnatmake hello
hello
</code></pre>
<h2 id="basic">BASIC</h2>
<p>It is still possible to reflect the old language from here,</p>
<p><a href="https://sourceforge.net/projects/devos-studio/">https://sourceforge.net/projects/devos-studio/</a>.</p>
<h2 id="c">C</h2>
<p>There have been multiple instances for suggesting migration from<code>tempnam</code> to <code>mkstemp</code> (<code>/usr/include/stdlib.h</code> under Bash but not Windows) and <code>mktemp</code>
-- the following code illustrates its use under both Bash and Windows, Nevertheless these are not standard routines, one still needs to add
 <code>char *mktemp(char *)</code> for instance.</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;
#include &lt;fcntl.h&gt;      /* for open flags */
#include &lt;limits.h&gt;     /* for PATH_MAX */

int main(void)
{
        static char template[] = &quot;/tmp/myfileXXXXXX&quot;;
        char fname[PATH_MAX];
        static char mesg[] =
                &quot;Here's lookin' at you, kid!\n&quot;;        /* beats &quot;hello, world&quot; */
        int fd;

        strcpy(fname, template);
        mktemp(fname);

        /* RACE CONDITION WINDOW OPENS */

        printf(&quot;Filename is %s\n&quot;, fname);

        /* RACE CONDITION WINDOW LASTS TO HERE */

        fd = open(fname, O_CREAT|O_RDWR|O_TRUNC, 0600);
        write(fd, mesg, strlen(mesg));
        close(fd);

        /* unlink(fname); */

        return 0;
}
</code></pre>
<p>A script for testing UTF-8 support by PCRE,</p>
<pre><code class="language-c">#include &lt;pcre.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

int main() {
    int supports_utf8;
    if (pcre_config (PCRE_CONFIG_UTF8, &amp;supports_utf8)) {
        fprintf(stderr, &quot;pcre_config() failed\n&quot;);
        exit(EXIT_FAILURE);
    }
    printf(&quot;UTF-8 is supported: %s\n&quot;, supports_utf8 ? &quot;yes&quot; : &quot;no&quot;);
    exit(EXIT_SUCCESS);
}
// gcc $(pkg-config --cflags --libs libpcre) pcreutf.c
// ./a.out
// pcretest -C
</code></pre>
<p>The following is Timsort implementation,</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;

#define MIN_RUN 32

// 插入排序算法
void insertionSort(int arr[], int left, int right) {
    for (int i = left + 1; i &lt;= right; i++) {
        int key = arr[i];
        int j = i - 1;
        while (j &gt;= left &amp;&amp; arr[j] &gt; key) {
            arr[j + 1] = arr[j];
            j--;
        }
        arr[j + 1] = key;
    }
}

// 归并函数
void merge(int arr[], int left, int mid, int right) {
    int len1 = mid - left + 1;
    int len2 = right - mid;
    int L[len1], R[len2];

    for (int i = 0; i &lt; len1; i++)
        L[i] = arr[left + i];
    for (int j = 0; j &lt; len2; j++)
        R[j] = arr[mid + 1 + j];

    int i = 0, j = 0, k = left;

    while (i &lt; len1 &amp;&amp; j &lt; len2) {
        if (L[i] &lt;= R[j])
            arr[k++] = L[i++];
        else
            arr[k++] = R[j++];
    }

    while (i &lt; len1)
        arr[k++] = L[i++];
    while (j &lt; len2)
        arr[k++] = R[j++];
}

// Timsort 算法
void timSort(int arr[], int n) {
    for (int i = 0; i &lt; n; i += MIN_RUN)
        insertionSort(arr, i, (i + MIN_RUN - 1) &lt; n ? (i + MIN_RUN - 1)
                      : (n - 1));

    for (int size = MIN_RUN; size &lt; n; size *= 2) {
        for (int left = 0; left &lt; n; left += 2 * size) {
            int mid = left + size - 1;
            int right = (left + 2 * size - 1) &lt; (n - 1) ?
              (left + 2 * size - 1) : (n - 1);
            merge(arr, left, mid, right);
        }
    }
}

int main() {
    int arr[] = {12, 11, 13, 5, 6, 7};
    int n = sizeof(arr) / sizeof(arr[0]);
    printf(&quot;Original array: &quot;);
    for (int i = 0; i &lt; n; i++)
        printf(&quot;%d &quot;, arr[i]);

    timSort(arr, n);

    printf(&quot;\nSorted array: &quot;);
    for (int i = 0; i &lt; n; i++)
        printf(&quot;%d &quot;, arr[i]);
    return 0;
}
</code></pre>
<p>y <code>gcc timsort.c -o timsort</code> and <code>timsort</code> to get</p>
<pre><code>Original array: 12 11 13 5 6 7
Sorted array: 5 6 7 11 12 13 14:40
</code></pre>
<h2 id="c_1">C++</h2>
<p>The use of Google Test is noted here,</p>
<p>Web: <a href="https://github.com/google/googletest">https://github.com/google/googletest</a>.</p>
<pre><code class="language-bash">wget -qO- https://github.com/google/googletest/archive/refs/tags/release-1.11.0.tar.gz | \
tar xvfz -
cd googletest-release-1.11.0
mkdir build &amp;&amp; cd build
build ..
make
# amending set(CMAKE_INSTALL_PREFIX &quot;/rds/user/jhz22/hpc-work&quot;) in `cmake_install.cmake`
make install
</code></pre>
<p>Now it is possible to compile R/glmnet 4.1-3, i.e., <code>find_package(GTest 1.11 CONFIG REQUIRED)</code> of <code>src/glmnetpp/CMakeLists.txt</code>.</p>
<h2 id="fortran">Fortran</h2>
<p>Information on modernising Fortran could be very useful in foreign language calls (e.g., R),</p>
<p>http://fortranwiki.org/fortran/show/Modernizing+Old+Fortran.</p>
<p>Debugging Fortran code</p>
<ul>
<li>gdb https://undo.io/resources/debugging-fortran-code-gdb/</li>
<li>valgrind</li>
</ul>
<pre><code>program segfault1
  implicit none
  real, dimension(10) :: a
  integer :: i
  a = 0.
  do i = 1, 12
     a(i) = i
     print*,a(i)
  end do
end program segfault1

! gfortran -g -Wall -Wextra -Wimplicit-interface -fPIC -fmax-errors=1 -fcheck=all -fbacktrace segfault1.f90 -o segfault1
! valgrind  --leak-check=full --dsymutil=yes --track-origins=yes ./segfault1
! MacOS --dsymutil=yes:
! valgrind  --leak-check=full --dsymutil=yes --track-origins=yes ./segfault1
</code></pre>
<h2 id="java">Java</h2>
<p>The IDE of choice is NetBeans (e.g., DEPICT and JAM); however 8.1 from <code>apt install</code> under Ubuntu 18.04 crashes
so it is suggested to download directly from https://netbeans.org/downloads/. To enable JDK it is helpful to specify <code>--javahome</code> option.</p>
<pre><code class="language-bash">sudo ./netbeans-8.2-linux.sh --javahome /usr/lib/jvm/java-8-oracale
</code></pre>
<p>or start with <code>netbeans --javahome /usr/lib/jvm/java-8-oracle</code> (more convenient to set <code>alias netbeans='netbeans --javahome /usr/lib/jvm/java-8-oracle'</code> at <code>.bashrc</code>).</p>
<p>NetBeans 9.0 is currently available from https://netbeans.apache.org/download/nb90/; the .zip file can be downloaded and unpacked for use.</p>
<p>For software such as <code>cutadapt</code> cython is required,</p>
<pre><code class="language-bash">sudo apt install cython
</code></pre>
<h2 id="javascript">JavaScript</h2>
<p>A current JavaScript/TypeScript interpreter is deno, <a href="https://anaconda.org/conda-forge/deno/files">https://anaconda.org/conda-forge/deno/files</a>.</p>
<pre><code class="language-bash">wget https://anaconda.org/conda-forge/deno/1.40.2/download/linux-64/deno-1.40.2-hfc7925d_0.conda -O deno.conda
unzip deno.conda
tar --use-compress-program=unzstd -xvf pkg-deno-1.40.2-hfc7925d_0.tar.zst
deno --version
</code></pre>
<p>giving</p>
<pre><code>deno 1.40.2 (release, x86_64-unknown-linux-gnu)
v8 12.1.285.6
typescript 5.3.3
</code></pre>
<p>The mermaid diagram is illustrated with <a href="../src/mermaid.html">mermaid.html</a> using code available from here, <a href="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.0.0/mermaid.min.js">https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.0.0/mermaid.min.js</a>.</p>
<p>The call can be embedded in markdown document,</p>
<pre><code>&lt;script type=&quot;module&quot;&gt;
  import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
  mermaid.initialize({ startOnLoad: true });
&lt;/script&gt;
</code></pre>
<p>The hello world example with plotly.js is <a href="https://plot.ly/javascript/getting-started/#hello-world-example">https://plot.ly/javascript/getting-started/#hello-world-example</a> and the 3D diagram is with <a href="../src/3d-scatter.html">3d-scatter.html</a> based on <a href="https://plot.ly/javascript/3d-scatter-plots/">https://plot.ly/javascript/3d-scatter-plots/</a>.</p>
<p>The base64 encode/decode is with <a href="https://www.base64encode.org/">https://www.base64encode.org/</a> &amp; <a href="https://www.base64decode.org/">https://www.base64decode.org/</a>.</p>
<h2 id="perl">Perl</h2>
<pre><code class="language-bash">sudo perl -MCPAN -e shell
install DBI
</code></pre>
<p>for instance, as used in <a href="https://jinghuazhao.github.io/software-notes/AA/#vep">VEP</a>.</p>
<p>Another notable example is circos, <a href="http://circos.ca">http://circos.ca</a> and its <a href="https://groups.google.com/g/circos-data-visualization">Google group</a>,</p>
<pre><code class="language-bash">wget -qO- http://www.circos.ca/distribution/circos-current.tgz | \
tar xvfz -
cd circos-0.69-9
bin/circos --modules
wget -qO- http://circos.ca/distribution/circos-tutorials-current.tgz | \
tar xvfz -
wget -qO- http://www.circos.ca/distribution/circos-tools-current.tgz | \
tar xvfz -
</code></pre>
<p>The following required modules can be installed</p>
<pre><code class="language-perl">Config::General (v2.50 or later)
Font::TTF
GD
List::MoreUtils
Math::Bezier
Math::Round
Math::VecStat
Params::Validate
Readonly
Regexp::Common
Set::IntSpan (v1.16 or later)
Text::Format
</code></pre>
<p>and we can enter the example/ directory to run its script. The <a href="https://github.com/kylase/CircosAPI">CircosAPI</a> module requires <code>namespace::autoclean</code>, <code>Moose</code>, <code>JSON::PP</code> and <code>String::Util</code>.</p>
<h2 id="python">Python</h2>
<p>To disable upgrade of pip, add </p>
<pre><code class="language-config">[global]
disable-pip-version-check = True
</code></pre>
<p>option to <code>$HOME/.config/pip/pip.conf</code></p>
<p>To install a particular version of package, e.g.,</p>
<pre><code class="language-bash">sudo -H pip install pandas==0.20.1
</code></pre>
<p>which is required by DEPICT's <code>munge_sumstats.py</code>. Other pip options include <code>uninstall</code>.</p>
<p>The python programs in <a href="https://github.com/ncrnalab/agotron_detector">agotron_detector</a> requires MySQL and can be installed as follows,</p>
<pre><code class="language-bash">sudo apt-get install python-dev libmysqlclient-dev
sudo pip install MySQL-python
</code></pre>
<p>It is necessary to use --user option without super-user privilege.</p>
<p>PyStan is available with <code>pip install pystan</code> which uses matplotlib, https://github.com/matplotlib and Tkinter, established with <code>sudo apt install python-tk</code> or <code>sudo apt install python3-tk</code>.</p>
<pre><code class="language-python">import pystan

schools_code = &quot;&quot;&quot;
data {
    int&lt;lower=0&gt; J; // number of schools
    real y[J]; // estimated treatment effects
    real&lt;lower=0&gt; sigma[J]; // s.e. of effect estimates
}
parameters {
    real mu;
    real&lt;lower=0&gt; tau;
    real eta[J];
}
transformed parameters {
    real theta[J];
    for (j in 1:J)
    theta[j] = mu + tau * eta[j];
}
model {
    eta ~ normal(0, 1);
    y ~ normal(theta, sigma);
}
&quot;&quot;&quot;

schools_dat = {'J': 8,
               'y': [28,  8, -3,  7, -1,  1, 18, 12],
               'sigma': [15, 10, 16, 11,  9, 11, 10, 18]}

sm = pystan.StanModel(model_code=schools_code)
fit = sm.sampling(data=schools_dat, iter=1000, chains=4)

import matplotlib.pyplot as plt
def plotGraph():
      fig = fit.plot()
      # plt.show()
      # use the save button or the following command,
      # f.savefig(&quot;foo.pdf&quot;, bbox_inches='tight')
      return fig

from matplotlib.backends.backend_pdf import PdfPages
pp = PdfPages('foo.pdf')
f = plotGraph()
pp.savefig(f)
pp.close()
</code></pre>
<p>To install jupyter-book,</p>
<pre><code class="language-bash">module load python/2.7.10
python -m pip install jupyter-book --user
</code></pre>
<p>and we can check for $HOME/.local/lib/python2.7/site-packages and start from /home/jhz22/.local/bin. We can install notebook similarly.</p>
<pre><code class="language-bash">python -m pip install notebook --user
</code></pre>
<p>Owing to recent changes, it is more appropriate to use python3</p>
<pre><code class="language-bash">module load python/3.5
export PATH=$PATH:$HOME/.local/bin
export PYTHONPATH=/usr/local/Cluster-Apps/python/3.5.1/lib/python3.5/site-packages:$HOME/.local/lib/python3.5/site-packages
python3 -m pip install jupyter-book --user
</code></pre>
<p>To convert from <code>parquet</code> to <code>csv</code> is done as follows,</p>
<pre><code class="language-python">import pandas as pd
import pyspark
import pyarrow
import sys
import os

fn = sys.argv[1]
print(fn)

df = pd.read_parquet(fn)

outfn = &quot;&quot;.join(&quot;GTEx_Analysis_v8_EUR_eQTL_all_associations_csv/&quot; + os.path.splitext(os.path.basename(fn))[0] + &quot;.csv&quot;) 
print(outfn)

df.to_csv(outfn)
</code></pre>
<h2 id="r">R</h2>
<p>Information on R and RStudio can be seen from installation section of this, <a href="https://jinghuazhao.github.io/Computational-Statistics/INSTALL/">https://jinghuazhao.github.io/Computational-Statistics/INSTALL/</a>.</p>
<p>The use of multi-byte string needs specific handling, e.g.,</p>
<pre><code class="language-bash"># on Bash
iconv myfile -f UTF-8 -t ISO-8859-1 -c
</code></pre>
<p>and</p>
<pre><code class="language-r"># in R
Sys.setlocale(&quot;LC_ALL&quot;, &quot;C&quot;)
</code></pre>
<p>See https://stackoverflow.com/questions/4993837/r-invalid-multibyte-string</p>
<p><strong>plotly</strong></p>
<p>It requires a number of software,</p>
<pre><code class="language-bash">sudo dnf install udunits2-devel
sudo dnf install cairo-devel
sudo dnf install gdal gdal-devel
sudo dnf install proj-devel proj-static
sudo dnf install geos geos-devel
</code></pre>
<p>to be followed by</p>
<pre><code class="language-r">install.packages(&quot;plotly&quot;,depend=TRUE,repos=&quot;https://cran.r-project.org&quot;)
</code></pre>
<p><strong>Calls from R</strong></p>
<ul>
<li>Basic examples using OpenMP with R, for C, C++, F77, and Fortran 2003 using Romp, https://github.com/wrathematics/Romp</li>
<li>RFI: R to Modern Fortran Interface, https://github.com/t-kalinowski/RFI</li>
<li>Stanford Utility Tools for R packages using Fortran, https://bnaras.github.io/SUtools/articles/SUtools.html</li>
</ul>
<p>Package examples for Fortran,
* https://cran.r-project.org/web/packages/Delaporte/index.html.
* https://cran.r-project.org/web/packages/spam/index.html
* https://cran.r-project.org/web/packages/spam64/index.html</p>
<p>Documentation
* https://www.avrahamadler.com/2018/12/09/the-need-for-speed-part-1-building-an-r-package-with-fortran/
* https://www.avrahamadler.com/2018/12/23/the-need-for-speed-part-2-c-vs-fortran-vs-c/
* https://www.sciencedirect.com/science/article/pii/S2352711018300785?via%3Dihub</p>
<p><strong>R packages</strong></p>
<p>See <a href="https://r-pkgs.org/index.html">https://r-pkgs.org/index.html</a>.</p>
<h2 id="shinyapps">shinyapps</h2>
<p>Web: <a href="https://www.shinyapps.io/">https://www.shinyapps.io/</a>, <a href="https://github.com/rstudio/shiny-examples">Shiny examples</a></p>
<p>The <code>hello world</code> version is as follows,</p>
<pre><code class="language-r">library(shiny)
ui &lt;- fluidPage(
  &quot;Hello, world!&quot;
)
server &lt;- function(input, output, session) {
}
shinyApp(ui, server)
</code></pre>
<p>Suppose our a directory (called shinyapps here) contains files <code>ui.R</code> and <code>server.R</code> (or combined in <code>app.R</code>).</p>
<p>Go the web site, and register an account with email address. Login from <a href="https://www.shinyapps.io/admin/#/login">https://www.shinyapps.io/admin/#/login</a> and the following information is available:</p>
<h3 id="step-1-install-rsconnect">Step 1 – Install rsconnect</h3>
<p>The rsconnect package can be installed directly from CRAN. To make sure you have the latest version run following code in your R console:</p>
<pre><code class="language-r">install.packages('rsconnect')
</code></pre>
<h3 id="step-2-authorize-account">Step 2 – Authorize Account</h3>
<p>The rsconnect package must be authorized to your account using a token and secret. To do this, click the copy button below and we'll copy the whole command you need to your clipboard. Just paste it into your console to authorize your account. Once you've entered the command successfully in R, that computer is now authorized to deploy applications to your shinyapps.io account.</p>
<pre><code class="language-r">rsconnect::setAccountInfo(name='your-account', token='your token', secret='your secret')
</code></pre>
<p>In the future, you can manage your tokens from the Tokens page the settings menu.</p>
<h3 id="step-3-deploy">Step 3 – Deploy</h3>
<p>Once the rsconnect package has been configured, you're ready to deploy your first application. If you haven't written any applications yet, you can also checkout the Getting Started Guide for instructions on how to deploy our demo application. Run the following code in your R console.</p>
<pre><code class="language-r">library(rsconnect)
rsconnect::deployApp('path/to/your/app')
</code></pre>
<p>The shiny page is then up as <code>https://your-account.shinyapps.io/shinyapps/</code>.</p>
<p>A more sophisticated Dashboard using the <code>Gapminer</code> dataset is copied here from R-bloggers.</p>
<pre><code class="language-R">library(shiny)
library(dplyr)
library(purrr)
library(gapminder)
library(highcharter)

ui &lt;- fluidPage(
  tags$head(
    tags$link(rel = &quot;stylesheet&quot;, type = &quot;text/css&quot;, href = &quot;styles.css&quot;)
  ),
  sidebarLayout(
    sidebarPanel(
      titlePanel(&quot;R Shiny Highcharts&quot;),
      selectInput(
        inputId = &quot;inContinent&quot;,
        label = &quot;Continent:&quot;,
        choices = unique(gapminder$continent),
        selected = &quot;Europe&quot;
      ),
      selectInput(
        inputId = &quot;inYearMin&quot;,
        label = &quot;Start year:&quot;,
        choices = unique(gapminder$year)[1:length(unique(gapminder$year)) - 1],
        selected = min(gapminder$year)
      ),
      selectInput(
        inputId = &quot;inYearMax&quot;,
        label = &quot;End year:&quot;,
        choices = unique(gapminder$year)[2:length(unique(gapminder$year))],
        selected = max(gapminder$year)
      ),
      width = 3
    ),
    mainPanel(
      tags$h3(&quot;Latest stats:&quot;),
      tags$div(
        tags$div(
          tags$p(&quot;# Countries:&quot;),
          textOutput(outputId = &quot;outNCountries&quot;)
        ) %&gt;% tagAppendAttributes(class = &quot;stat-card&quot;),
        tags$div(
          tags$p(&quot;Median life exp:&quot;),
          textOutput(outputId = &quot;outMedLifeExp&quot;)
        ) %&gt;% tagAppendAttributes(class = &quot;stat-card&quot;),
        tags$div(
          tags$p(&quot;Median population:&quot;),
          textOutput(outputId = &quot;outMedPop&quot;)
        ) %&gt;% tagAppendAttributes(class = &quot;stat-card&quot;),
        tags$div(
          tags$p(&quot;Median GDP:&quot;),
          textOutput(outputId = &quot;outMedGDP&quot;)
        ) %&gt;% tagAppendAttributes(class = &quot;stat-card&quot;)
      ) %&gt;% tagAppendAttributes(class = &quot;stat-card-container&quot;),
      tags$div(
        tags$h3(&quot;Summary stats:&quot;),
        tags$div(
          tags$div(
            highchartOutput(outputId = &quot;chartLifeExpByYear&quot;, height = 500)
          ) %&gt;% tagAppendAttributes(class = &quot;chart-card&quot;),
          tags$div(
            highchartOutput(outputId = &quot;chartGDPByYear&quot;, height = 500)
          ) %&gt;% tagAppendAttributes(class = &quot;chart-card&quot;),
        ) %&gt;% tagAppendAttributes(class = &quot;base-charts-container&quot;)
      ) %&gt;% tagAppendAttributes(class = &quot;card-container&quot;),
      tags$div(
        tags$h3(&quot;Drilldown:&quot;),
        tags$div(
          highchartOutput(outputId = &quot;chartDrilldown&quot;, height = 500)
        ) %&gt;% tagAppendAttributes(class = &quot;chart-card chart-card-full&quot;)
      ) %&gt;% tagAppendAttributes(class = &quot;card-container&quot;),
      width = 9
    ) %&gt;% tagAppendAttributes(class = &quot;main-container&quot;)
  )
)

server &lt;- function(input, output) {
  data_cards &lt;- reactive({
    gapminder %&gt;%
      filter(
        continent == input$inContinent,
        year == max(year)
      ) %&gt;%
      summarise(
        nCountries = n_distinct(country),
        medianLifeExp = median(lifeExp),
        medianPopM = median(pop / 1e6),
        medianGDP = median(gdpPercap)
      )
  })

  data_charts &lt;- reactive({
    gapminder %&gt;%
      filter(
        continent == input$inContinent,
        between(year, as.integer(input$inYearMin), as.integer(input$inYearMax))
      ) %&gt;%
      group_by(year) %&gt;%
      summarise(
        medianLifeExp = round(median(lifeExp), 1),
        medianGDP = round(median(gdpPercap), 2)
      )
  })

  drilldown_chart_base_data &lt;- reactive({
    gapminder %&gt;%
      filter(
        continent == input$inContinent,
        year == max(year)
      ) %&gt;%
      group_by(country) %&gt;%
      summarise(
        pop = round(pop, 1)
      ) %&gt;%
      arrange(desc(pop))
  })

  drilldown_chart_drilldown_data &lt;- reactive({
    gapminder %&gt;%
      filter(
        continent == input$inContinent,
        between(year, as.integer(input$inYearMin), as.integer(input$inYearMax))
      ) %&gt;%
      group_nest(country) %&gt;%
      mutate(
        id = country,
        type = &quot;column&quot;,
        data = map(data, mutate, name = year, y = pop),
        data = map(data, list_parse)
      )
  })


  output$outNCountries &lt;- renderText({
    data_cards()$nCountries
  })
  output$outMedLifeExp &lt;- renderText({
    paste(round(data_cards()$medianLifeExp, 1), &quot;years&quot;)
  })
  output$outMedPop &lt;- renderText({
    paste0(round(data_cards()$medianPopM, 2), &quot;M&quot;)
  })
  output$outMedGDP &lt;- renderText({
    paste0(&quot;$&quot;, round(data_cards()$medianGDP, 2))
  })

  output$chartLifeExpByYear &lt;- renderHighchart({
    hchart(data_charts(), &quot;column&quot;, hcaes(x = year, y = medianLifeExp), color = &quot;#0198f9&quot;, name = &quot;Median life expectancy&quot;) |&gt;
      hc_title(text = &quot;Median life expectancy by year&quot;, align = &quot;left&quot;) |&gt;
      hc_xAxis(title = list(text = &quot;Year&quot;)) |&gt;
      hc_yAxis(title = list(text = &quot;Life expectancy&quot;))
  })

  output$chartGDPByYear &lt;- renderHighchart({
    hchart(data_charts(), &quot;line&quot;, hcaes(x = year, y = medianGDP), color = &quot;#800000&quot;, name = &quot;Median GDP&quot;) |&gt;
      hc_title(text = &quot;Median GDP by year&quot;, align = &quot;left&quot;) |&gt;
      hc_xAxis(title = list(text = &quot;Year&quot;)) |&gt;
      hc_yAxis(title = list(text = &quot;GDP&quot;))
  })

  output$chartDrilldown &lt;- renderHighchart({
    hchart(
      drilldown_chart_base_data(),
      &quot;column&quot;,
      hcaes(x = country, y = pop, drilldown = country),
      name = &quot;Population&quot;
    ) %&gt;%
      hc_drilldown(
        allowPointDrilldown = TRUE,
        series = list_parse(drilldown_chart_drilldown_data())
      ) |&gt;
      hc_colors(c(&quot;#004c5f&quot;)) |&gt;
      hc_title(text = &quot;Population report&quot;, align = &quot;left&quot;) |&gt;
      hc_xAxis(title = list(text = &quot;&quot;)) |&gt;
      hc_yAxis(title = list(text = &quot;Population&quot;))
  })
}

shinyApp(ui = ui, server = server)
</code></pre>
<p>and the <code>www/styles.css</code> is here,</p>
<pre><code class="language-css">www/styles.css
@import url('https:/s.googleapis.com/css2?family=Poppins:ital,wght@0,700;1,400&amp;display=swap');

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  -family: 'Poppins', sans-serif;
  -weight: 400;
}

.main-container {
  padding-top: 1rem;
}

.stat-card-container {
  display: flex;
  justify-content: space-between;
  column-gap: 1rem;
}

.stat-card {
  border: 2px solid #f2f2f2;
  border-bottom: 2px solid #0198f9;
  width: 100%;
  padding: 0.5rem 0 0.5rem 1rem;
}

.stat-card &gt; p {
  text-transform: uppercase;
  color: #808080;
}

.stat-card &gt; div.shiny-text-output {
  -size: 3rem;
  -weight: 700;
}

.card-container {
  padding-top: 2rem;
}

.base-charts-container {
  display: flex;
  justify-content: space-between;
  column-gap: 1rem;
}

.chart-card {
  border: 2px solid #f2f2f2;
  width: 50%;
}

.chart-card-full {
  width: 100%;
}
</code></pre>
<h2 id="texlatex">TeX/LaTeX</h2>
<p>It is most convient to convert Tex/LaTex formulas into MicroSoft Word equtions via pandoc, i.e.,
<code>pandoc README.md -o README.docx</code>.</p>
<p>See <a href="https://pandoc.org/">https://pandoc.org/</a> and <a href="https://pandoc.org/try/">https://pandoc.org/try/</a>.</p>
<p>For Chinese language support, try</p>
<pre><code class="language-bash">sudo apt-get install texlive-latex-base
sudo apt-get install latex-cjk-all
sudo apt-get install texlive-latex-extra
sudo apt-get install texmaker
sudo apt-get install texlive-xetex
sudo apt-get install texlive-publishers
</code></pre>
<p>Now change latex to xelatex from Texmaker.</p>
<pre><code class="language-latex">\documentclass{article}
\usepackage(xeCJK}
\begin{document}
How are you?你好吗？
\LaTeX
\end{document}
</code></pre>
<h2 id="typescript">typescript</h2>
<p>First, create hello.ts with two lines,</p>
<pre><code class="language-ts">#!/usr/bin/env ts-node
console.log('Hello world!');
</code></pre>
<p>and set up the environment,</p>
<pre><code>npm install -g npm
npm install typescript ts-node -g
chmod +x hello.ts
hello.ts
</code></pre>
<h2 id="visual-studio-code">Visual Studio Code</h2>
<p>It is available from <a href="https://code.visualstudio.com/download">https://code.visualstudio.com/download</a>, so we could download a .tar.gz file and unpack.</p>
<p>There is a pointer from https://github.com/Microsoft/vscode to https://code.visualstudio.com/Download. Once downloaded, it can be installed with</p>
<pre><code class="language-bash">sudo dpkg -i code_1.23.1-1525968403_amd64.deb
</code></pre>
<p>but it requires <code>libgconf-2-4</code>; when failed to install use <code>sudo apt --fix-broken install</code>.</p>
<p>See <a href="https://code.visualstudio.com/docs/python/python-tutorial">https://code.visualstudio.com/docs/python/python-tutorial</a> for the hello world example.</p>
<h2 id="chatgpt">ChatGPT</h2>
<p>We have <code>export OPENAI_API_KEY=$(grep sk ~/doc/OpenAI)</code>, and our first session:</p>
<pre><code class="language-python">import os
import openai

openai.api_key = os.getenv(&quot;OPENAI_API_KEY&quot;)
if openai.api_key is None:
    raise ValueError(&quot;API key not found. Please set the OPENAI_API_KEY environment variable.&quot;)

question = input(&quot;What is your question? &quot;)

response = openai.ChatCompletion.create(
    model=&quot;gpt-3.5-turbo&quot;,
    messages=[
        {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: question},
    ],
    max_tokens=512,
    n=1,
    stop=None,
    temperature=0.8,
)

print(response)
answer = response['choices'][0]['message']['content']
print(&quot;OpenAI: &quot; + answer)
</code></pre>
<h2 id="codegpt">CodeGPT</h2>
<p>We need sign up/in for an API key from <a href="https://platform.openai.com/overview">https://platform.openai.com/overview</a>, e.g., via your MicrsoSoft account.</p>
<p>From <code>Visual Studio Code</code>, add extension <code>CodeGPT</code>; <code>Ctrl-Shit-p</code> to saarch for <code>CodeGPT: Set API Key</code> and enter the key given above from <a href="https://platform.openai.com/account/api-keys">https://platform.openai.com/account/api-keys</a>.</p>
<p>Then we create a file, start with a comment, e.g., '# to draw a forest plot' and <code>Ctrl-Shift-i</code> to obtain the code.</p>
<p>Here is one of the results given,</p>
<pre><code class="language-r"># First, create a dataset with the relevant values for your forest plot
study_names &lt;- c(&quot;Study A&quot;, &quot;Study B&quot;, &quot;Study C&quot;, &quot;Study D&quot;)
odds_ratios &lt;- c(1.2, 1.5, 0.8, 0.6)
lo_ci &lt;- c(0.9, 1.0, 0.5, 0.3)
hi_ci &lt;- c(1.5, 2.0, 1.2, 0.9)

# Combine data into a data frame
df &lt;- data.frame(study_names, odds_ratios, lo_ci, hi_ci)

# Load the 'meta' package for the forest plot function
library(meta)

# Create the forest plot
forest(df$odds_ratios, ci.lb = df$lo_ci, ci.ub = df$hi_ci,
       slab = df$study_names, xlab = &quot;Odds Ratio&quot;,
       main = &quot;Forest Plot Example&quot;)
</code></pre></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../js/jquery-3.6.0.min.js"></script>
        <script src="../js/bootstrap.min.js"></script>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js"></script>
        <script src="../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
